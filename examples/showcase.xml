<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>

<simulation world-size="160um 90um" dt="1ms" aiterations="5000" background="black">
    <program name="make-gfp" language="stochastic-reactions-intercellular">
		<![CDATA[
        null < 0.5, 10 > GFP;
        GFP > 0.5 > env;
		]]>
	</program>

	<program name="make-rfp" language="stochastic-reactions-intercellular">
		<![CDATA[
        env > 10 > GFP;
        GFP > 100 > RFP;
        RFP > 0.1 > env;
		]]>
   </program>

   <program name="make-yfp" language="stochastic-reactions-intercellular">
		<![CDATA[
        env > 10 > RFP;
        RFP > 100 > YFP;
        YFP > 0.1 > env;
		]]>
   </program>

    <module name="diffusion" grid="320 180">
        <signal name="GFP" diffusion-rate="50um2/s" degradation-rate="0.1/s" color="green" />
        <signal name="RFP" diffusion-rate="50um2/s" degradation-rate="0.1/s" color="red" />
        <signal name="YFP" diffusion-rate="50um2/s" degradation-rate="0.1/s" color="yellow" />
    </module>

    <module name="object-generator">
        <object class="cell.Yeast" probability="0.02" programs="make-gfp" position-min="-80um -30um" position-max="-78um 30um" >
            <molecule name="REC1" amount="10000" />
        </object>
        <object class="cell.Yeast" probability="0.02" programs="make-rfp" position-min="-80um -30um" position-max="-78um 30um" >
            <molecule name="REC2" amount="10000" />
        </object>
        <object class="cell.Yeast" probability="0.02" programs="make-yfp" position-min="-80um -30um" position-max="-78um 30um" >
        		<molecule name="REC3" amount="10000" />
        </object>
    </module>

    <object class="cell.Cell" type="static" volume="2000um3" />

    <module name="streamlines" grid="160 90" coefficient="0.01" iterations="3" velocity-inflow="200um/s" kinematic-viscosity="0.658mm2/s" />
    
    <module name="diffusion-streamlines" />

    <module name="agglutination">
        <bond ligand="LIG1" receptor="REC1" receptor-size="1" association-constant="50000" disassociation-constant="1" />
        <bond ligand="LIG2" receptor="REC2" receptor-size="1" association-constant="50000" disassociation-constant="1" />
        <bond ligand="LIG3" receptor="REC3" receptor-size="1" association-constant="50000" disassociation-constant="1" />
    </module>

    <object class="cell.Cell" type="static" volume="2000um3">
        <molecule name="LIG1" amount="10000" />
        <molecule name="LIG2" amount="10000" />
        <molecule name="LIG3" amount="10000" />
    </object>

    <obstacle type="rectangle" position="0 46um" size="160um 4um" />
    <obstacle type="rectangle" position="0 -46um" size="160um 4um" />
</simulation>

