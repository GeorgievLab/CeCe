<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!-- Simulation definition -->
<simulation world-size="20um 20um" dt="1s" iterations="5000">
    <parameter name="t1" value="1e-22" />
    <parameter name="t2" value="1e-22" />
    <!-- Define diffusion module -->
    <module name="diffusion" grid="100" background="black">
        <signal name="GFP" diffusion-rate="50um2/s" degradation-rate="0.001/s" color="green" saturation="0.000001umol/m3" />
        <signal name="RFP" diffusion-rate="50um2/s" degradation-rate="0.001/s" color="red" saturation="0.000001umol/m3" />
        <signal name="YFP" diffusion-rate="50um2/s" degradation-rate="0.001/s" color="yellow" saturation="0.000001umol/m3" />
    </module>

    <!-- Produce GFP -->
    <program name="make-gfp" language="stochastic-reactions-intercellular">
<![CDATA[
        null > 50 > env_GFP;
]]>
    </program>

    <!-- Produce RFP in proximity of YFP -->
    <program name="make-rfp" language="stochastic-reactions-intercellular">
<![CDATA[
        if env_YFP > t2: null > 100 > env_RFP;
]]>
    </program>

    <!-- Produce YFP in proximity of GFP -->
    <program name="make-yfp" language="stochastic-reactions-intercellular">
<![CDATA[
        if env_GFP > t1: null > 100 > env_YFP;
]]>
    </program>

    <!-- Create yeast -->
    <object class="cell.Yeast" position="0 5um"  programs="make-rfp" />
    <object class="cell.Yeast" position="0 0"    programs="make-yfp" />
    <object class="cell.Yeast" position="0 -5um" programs="make-gfp" />

    <amodule name="diffusion.store-state" />
</simulation>

