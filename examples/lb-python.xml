<simulation world-size="100um 100um" dt="1ms" iterations="10000">
    <module name="streamlines" grid="200 100" inlet-velocities="0 500um/s 0 500um/s" />
    <module name="streamlines-python" />
    <object class="cell.Cell" type="static" volume="2000um3" />
    <object class="cell.Yeast" position="-20um 0" />
    <object class="cell.Yeast" position="-20um 30um" />
    <obstacle type="rectangle" position="0 45um" size="100um 10um" />
    <obstacle type="rectangle" position="0 -45um" size="100um 10um" />
    <module name="python:shake">
layouts = [
    ["barrier", "outlet", "barrier", "inlet"],
    ["barrier", "inlet", "barrier", "outlet"]
]
mode = 1

def update(dt, simulation):
    module = simulation.useModule("streamlines")

    if (simulation.iteration % 500 == 0):
        print mode
        module.setLayout(layouts[mode % 2])
        mode = mode + 1
    </module>
</simulation>

